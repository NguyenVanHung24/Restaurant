# name: BuildFE

# on:
#   push:
#     branches:
#       - fe
#       - main
#   pull_request:
#     branches:
#       - fe
#       - main
# env:
#   # Use docker.io for Docker Hub if empty
#   REGISTRY: docker.io
#   # github.repository as <account>/<repo>
#   IMAGE_NAME: hungnv9999/app


# jobs:
#   # build:
#   #   runs-on: [self-hosted, some-label]
#   #   defaults:
#   #     run:
#   #       working-directory: ./React-js-Master-Detail-CRUD-with-Asp.Net-Web-API/restaurant
#   #   steps:
#   #     - uses: actions/checkout@v3
#   #     - uses: actions/setup-node@v3
#   #       with:
#   #         node-version: 16
#   #     - run: npm install
#   #     - name: Build App
#   #       run: npm run build

#   # build_image:
#   #   runs-on: [self-hosted, some-label]
#   #   defaults:
#   #     run:
#   #       working-directory: ./React-js-Master-Detail-CRUD-with-Asp.Net-Web-API/restaurant
#   #   steps:
#   #     - uses: actions/checkout@v3
#   #     - name: Build Docker image
#   #       run: docker build -t app .
#   pushimage:
#     runs-on: [self-hosted, some-label] 

#     defaults:
#       run:
#         working-directory: ./React-js-Master-Detail-CRUD-with-Asp.Net-Web-API/restaurant     
#     steps:

#     - name: Checkout
#       uses: actions/checkout@v3

#     - name: Setup Docker Buildx
#       uses: docker/setup-buildx-action@v1
#       id: buildx
    

#     - name: Login to Docker Hub
#       uses: docker/login-action@v3
#       with:
#         username: ${{ secrets.USERNAME }}
#         password: ${{ secrets.DOCKER_TOKEN }}
    
#     - name: Extract metadata (tags, labels) for Docker
#       id: meta
#       uses: docker/metadata-action@98669ae865ea3cffbcbaa878cf57c20bbf1c6c38
#       with:
#         images: ${{ env.REGISTRY }}/${{ env.IMAGE_NAME }}

#     - name: Build and push
#       uses: docker/build-push-action@v5
#       with:
#         tags: ${{ steps.meta.outputs.tags }}
#         labels: ${{ steps.meta.outputs.labels }}
#         push: ${{ github.event_name != 'pull_request' }} # Don't push on PR
#         context: ./React-js-Master-Detail-CRUD-with-Asp.Net-Web-API/restaurant   
#         file: ./React-js-Master-Detail-CRUD-with-Asp.Net-Web-API/restaurant/Dockerfile